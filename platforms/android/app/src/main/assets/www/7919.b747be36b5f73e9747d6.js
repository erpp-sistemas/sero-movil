(self.webpackChunkerpp_movil=self.webpackChunkerpp_movil||[]).push([[7919],{17919:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ChecadorPageModule:()=>p});var n=i(61116),a=i(11462),r=i(54812),o=i(9069),s=i(64762),l=i(38599),c=i(87368),g=i(90074),d=i(18372),h=i(75919);const u=[{path:"",component:(()=>{class t{constructor(t,e,i,n,a,r,o,s){this.router=t,this.callNumber=e,this.alertController=i,this.loadingCtrl=n,this.toastCtrl=a,this.platform=r,this.storage=o,this.rest=s,this.idAspUser=""}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){yield this.platform.ready(),yield this.loadMap(),this.idAspUser=yield this.storage.get("IdAspUser")})}loadMap(){return(0,s.mG)(this,void 0,void 0,function*(){this.map=l.hz.create("map_canvas",{mapType:l.OE.ROADMAP,controls:{compass:!0,myLocationButton:!0,myLocation:!0,mapToolbar:!0},gestures:{scroll:!0,tilt:!0,zoom:!0,rotate:!0}}),this.loading=yield this.loadingCtrl.create({message:"Cargando mapa..."}),yield this.loading.present(),this.map.getMyLocation().then(t=>{this.loading.dismiss(),this.latitud=t.latLng.lat.toString(),this.longitud=t.latLng.lng.toString(),this.map.animateCamera({target:t.latLng,zoom:12,tilt:30}),this.map.addMarkerSync({title:"Mi ubicaci\xf3n actual",position:t.latLng,animation:l.sF.BOUNCE,icon:{url:"assets/icon/sero.png",size:{width:30,height:30}}}).showInfoWindow()}).catch(t=>{this.loading.dismiss(),this.showToast(t.error_message)})})}showToast(t){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t,duration:2e3,position:"middle"})).present()})}checarEntrada(){return(0,s.mG)(this,void 0,void 0,function*(){if(""==this.latitud||null==this.latitud||null==this.latitud)alert("La ubicaci\xf3n no esta disponible");else{this.loading=yield this.loadingCtrl.create({message:"Registrando entrada",spinner:"dots"}),yield this.loading.present();let e=1;var t=(new Date).toISOString();let i=new Date(t),n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds())).toISOString();this.rest.registroChecador(+e+","+this.idAspUser+',"'+n+'",'+this.latitud+","+this.longitud).then(t=>{this.loading.dismiss(),alert(t[0].mensaje)})}})}checarSalida(){return(0,s.mG)(this,void 0,void 0,function*(){if(""==this.latitud||null==this.latitud||null==this.latitud)alert("La ubicaci\xf3n no esta disponible");else{this.loading=yield this.loadingCtrl.create({message:"Registrando salida",spinner:"dots"}),yield this.loading.present();let e=2;var t=(new Date).toISOString();let i=new Date(t),n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds())).toISOString();this.rest.registroChecador(+e+","+this.idAspUser+',"'+n+'",'+this.latitud+","+this.longitud).then(t=>{this.loading.dismiss(),alert(t[0].mensaje)})}})}confirmarRegistroEntrada(){return(0,s.mG)(this,void 0,void 0,function*(){var t=(new Date).toISOString();let e=new Date(t),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())).toISOString();const n=yield this.alertController.create({header:"Confirmar!",message:"Registrar <strong>entrada:</strong><br><strong>"+i+"</strong>",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Aceptar",handler:()=>{this.checarEntrada()}}]});yield n.present()})}confirmarRegistroSalida(){return(0,s.mG)(this,void 0,void 0,function*(){var t=(new Date).toISOString();let e=new Date(t),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())).toISOString();const n=yield this.alertController.create({header:"Confirmar!",message:"Registrar <strong>salida:</strong><br><strong>"+i+"</strong>",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Aceptar",handler:()=>{this.checarSalida()}}]});yield n.present()})}regresarPrincipal(){return(0,s.mG)(this,void 0,void 0,function*(){this.loading=yield this.loadingCtrl.create({message:"Regresando...",spinner:"circles"}),this.loading.present(),setTimeout(()=>{this.loading.dismiss(),this.router.navigateByUrl("/home")},1e3)})}navegar(t){1==t?this.router.navigateByUrl("home/tab1"):2==t?this.router.navigateByUrl("home/tab2"):3==t?this.router.navigateByUrl("home/tab3"):4==t?this.router.navigateByUrl("home/tab4"):5==t&&this.callNumber.callNumber("911",!0).then(t=>console.log("Launched dialer!",t)).catch(t=>console.log("Error launching dialer",t))}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(o.F0),c.Y36(g.X),c.Y36(r.Br),c.Y36(r.HT),c.Y36(r.yF),c.Y36(r.t4),c.Y36(d.Ke),c.Y36(h.v))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-checador"]],decls:42,vars:0,consts:[["id","map_canvas"],["color","medium"],["text-center",""],["color","tertiary","expand","block",3,"click"],["scrollable",""],[3,"click"],["color","light","name","home"],["color","light",2,"font-size","2px"],["color","light","name","layers"],["color","light","name","map"],["color","light","name","warning"],["src","../../../assets/img/sos.png","alt","",2,"width","30px","height","30px","margin-bottom","-15px"],["color","light",2,"font-size","3px","margin-bottom","-1px"]],template:function(t,e){1&t&&(c._UZ(0,"hr"),c._UZ(1,"hr"),c._UZ(2,"hr"),c._UZ(3,"hr"),c._UZ(4,"div",0),c.TgZ(5,"ion-content",1),c.TgZ(6,"ion-card",1),c.TgZ(7,"ion-card-content",2),c.TgZ(8,"ion-button",3),c.NdJ("click",function(){return e.confirmarRegistroEntrada()}),c._uU(9,"Checar Entrada"),c.qZA(),c._UZ(10,"hr"),c.TgZ(11,"ion-button",3),c.NdJ("click",function(){return e.confirmarRegistroSalida()}),c._uU(12,"Checar Salida"),c.qZA(),c._UZ(13,"hr"),c.TgZ(14,"ion-button",3),c.NdJ("click",function(){return e.regresarPrincipal()}),c._uU(15,"Regresar"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"ion-segment",4),c.TgZ(17,"ion-segment-button",5),c.NdJ("click",function(){return e.navegar(1)}),c._UZ(18,"ion-icon",6),c.TgZ(19,"ion-label",7),c.TgZ(20,"small"),c._uU(21,"Inicio"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"ion-segment-button",5),c.NdJ("click",function(){return e.navegar(2)}),c._UZ(23,"ion-icon",8),c.TgZ(24,"ion-label",7),c.TgZ(25,"small"),c._uU(26,"Cuentas"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(27,"ion-segment-button",5),c.NdJ("click",function(){return e.navegar(3)}),c._UZ(28,"ion-icon",9),c.TgZ(29,"ion-label",7),c.TgZ(30,"small"),c._uU(31,"Mapa"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(32,"ion-segment-button",5),c.NdJ("click",function(){return e.navegar(4)}),c._UZ(33,"ion-icon",10),c.TgZ(34,"ion-label",7),c.TgZ(35,"small"),c._uU(36,"S.P\xfablicos"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(37,"ion-segment-button",5),c.NdJ("click",function(){return e.navegar(5)}),c._UZ(38,"img",11),c.TgZ(39,"ion-label",12),c.TgZ(40,"small"),c._uU(41,"S.O.S."),c.qZA(),c.qZA(),c.qZA(),c.qZA())},directives:[r.W2,r.PM,r.FN,r.YG,r.cJ,r.QI,r.GO,r.gu,r.Q$],styles:["ion-segment[_ngcontent-%COMP%]{--background:#254061;border-top:1px solid #0000001a;height:60px;margin-bottom:-5px}ion-segment-button[_ngcontent-%COMP%]{--indicator-color:#0000!important}#map_canvas[_ngcontent-%COMP%]{height:60%;width:100%}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.Bz.forChild(u)],o.Bz]}),t})(),p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,a.u5,r.Pc,m]]}),t})()}}]);