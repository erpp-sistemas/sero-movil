(self.webpackChunkerpp_movil=self.webpackChunkerpp_movil||[]).push([[4010],{44010:(t,i,o)=>{"use strict";o.r(i),o.d(i,{ListadoCuentasPageModule:()=>A});var n=o(61116),e=o(11462),a=o(54812),s=o(9069),c=o(64762),r=o(87368),l=o(75919),g=o(2977),u=o(79899),d=o(9935),h=o(18372),p=o(90074);let m=(()=>{class t{transform(t,i){if(i.length<3)return t;const o=[];for(const n of t)(n.cuenta.toLowerCase().indexOf(i.toLowerCase())>-1||n.propietario.toLowerCase().indexOf(i.toLowerCase())>-1||n.direccion.toLowerCase().indexOf(i.toLowerCase())>-1)&&o.push(n);return o}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=r.Yjl({name:"filtro",type:t,pure:!0}),t})();function Z(t,i){if(1&t&&(r.TgZ(0,"ion-chip",19),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.hij("Total: ",t.total,"")}}function f(t,i){if(1&t&&(r.TgZ(0,"div"),r.TgZ(1,"p"),r._uU(2),r.ALo(3,"filtro"),r.qZA(),r.qZA()),2&t){const t=r.oxw(2);r.xp6(2),r.hij("Coincidencias: ",r.xi3(3,1,t.accountBusqueda,t.findText).length," ")}}function _(t,i){if(1&t&&(r.TgZ(0,"div",20),r.YNc(1,f,4,4,"div",21),r.qZA()),2&t){const t=i.index,o=r.oxw();r.xp6(1),r.Q6J("ngIf",o.findText.length>3&&0==t)}}function x(t,i){1&t&&(r.TgZ(0,"p",35),r._uU(1,"Realizada"),r.qZA())}function T(t,i){if(1&t){const t=r.EpF();r.TgZ(0,"ion-item-sliding",22),r.TgZ(1,"ion-item-options",23),r.TgZ(2,"ion-item-option",24),r.NdJ("click",function(){const i=r.CHM(t).$implicit;return r.oxw().goPanoramaView(i)}),r._UZ(3,"ion-icon",25),r.qZA(),r.TgZ(4,"ion-item-option",26),r.NdJ("click",function(){const i=r.CHM(t).$implicit;return r.oxw().openLink(i)}),r._UZ(5,"img",27),r.qZA(),r.qZA(),r.TgZ(6,"ion-item",28),r.TgZ(7,"ion-label"),r.TgZ(8,"p"),r.TgZ(9,"ion-chip",3),r._uU(10),r.qZA(),r.qZA(),r.TgZ(11,"p",29),r._uU(12),r.qZA(),r.TgZ(13,"p",30),r._uU(14),r.qZA(),r.TgZ(15,"p",29),r._uU(16),r.ALo(17,"currency"),r.qZA(),r.TgZ(18,"p",29),r._uU(19),r.qZA(),r.YNc(20,x,2,0,"p",31),r.qZA(),r.qZA(),r.TgZ(21,"ion-item-options",32),r.TgZ(22,"ion-item-option",33),r.NdJ("click",function(){const i=r.CHM(t).$implicit;return r.oxw().gestionarCuenta(i)}),r._UZ(23,"ion-icon",34),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=i.$implicit;r.xp6(10),r.hij("Cuenta: ",t.cuenta," "),r.xp6(2),r.hij("Propietario: ",t.propietario,""),r.xp6(2),r.hij("Direcci\xf3n: ",t.direccion,""),r.xp6(2),r.hij("Deuda:",r.Dn7(17,6,t.total,"USD","symbol"),""),r.xp6(3),r.hij("Proceso: ",t.proceso_gestion," "),r.xp6(1),r.Q6J("ngIf",1==t.gestionada)}}const v=[{path:"",component:(()=>{class t{constructor(t,i,o,n,e,a,s,c,r){this.rest=t,this.router=i,this.loadinCtrl=o,this.geolocation=n,this.iab=e,this.message=a,this.activeRoute=s,this.storage=c,this.callNumber=r,this.findText="",this.busqueda=!1}ngOnInit(){this.idServicioPlaza=this.activeRoute.snapshot.paramMap.get("id"),this.id_plaza=this.activeRoute.snapshot.paramMap.get("id_plaza"),this.listadoCuentas(this.id_plaza,this.idServicioPlaza)}listadoCuentas(t,i){return(0,c.mG)(this,void 0,void 0,function*(){this.account=null,this.accountBusqueda=null,this.loading=yield this.loadinCtrl.create({message:"Cargando listado ",spinner:"lines-small"}),yield this.loading.present(),yield this.getInfo(t,i),yield this.getInfoCuentas(t,i),this.loading.dismiss()})}getInfo(t,i){return(0,c.mG)(this,void 0,void 0,function*(){this.total=yield this.rest.getTotalAccounts(t,i),console.log("Total del servicio"+i+" "+this.total),this.gestionadas=yield this.rest.getGestionadas(t,i),console.log("Gestionadas del servicio "+i+" "+this.gestionadas)})}getInfoCuentas(t,i){return(0,c.mG)(this,void 0,void 0,function*(){this.account=null,this.account=yield this.rest.cargarListadoCuentas(t,i),this.accountBusqueda=null,this.accountBusqueda=yield this.rest.cargarListadoCuentas(t,i),0==this.account.length&&(this.message.showAlert("Tienes que descargar informaci\xf3n para visualizar las cuentas!!!!"),this.router.navigateByUrl("/home"))})}find(t){this.busqueda=!0,this.findText=t.detail.value}goPanoramaView(t){return(0,c.mG)(this,void 0,void 0,function*(){let i={lat:parseFloat(t.latitud),lng:parseFloat(t.longitud)};console.log("Entra a ver la position"),console.log(i),this.router.navigate(["streetview"],{state:{position:i}})})}openLink(t){return(0,c.mG)(this,void 0,void 0,function*(){this.loading=yield this.loadinCtrl.create({message:"Obteniedo ubicaci\xf3n"}),yield this.loading.present();const i=yield this.geolocation.getCurrentPosition();this.loading.dismiss();let o=`https://www.google.com/maps/dir/'${i.coords.latitude},${i.coords.longitude}'/${parseFloat(t.latitud)},${parseFloat(t.longitud)}`;console.log(o),this.iab.create(o,"_system",{location:"yes",zoom:"yes"})})}gestionarCuenta(t){return(0,c.mG)(this,void 0,void 0,function*(){let{cuenta:i,id_proceso:o,proceso_gestion:n,url_aplicacion_movil:e,icono_proceso:a}=t;yield this.storage.set("account",i),yield this.storage.set("id_proceso",o),yield this.storage.set("proceso_gestion",n),yield this.storage.set("icono_proceso",a),this.router.navigateByUrl(e)})}navegar(t){1==t?this.router.navigateByUrl("home/tab1"):2==t?this.router.navigateByUrl("home/tab2"):3==t?this.router.navigateByUrl("home/tab3"):4==t?this.router.navigateByUrl("home/tab4"):5==t&&this.callNumber.callNumber("911",!0).then(t=>console.log("Launched dialer!",t)).catch(t=>console.log("Error launching dialer",t))}}return t.\u0275fac=function(i){return new(i||t)(r.Y36(l.v),r.Y36(s.F0),r.Y36(a.HT),r.Y36(g.b),r.Y36(u.i),r.Y36(d.K),r.Y36(s.gz),r.Y36(h.Ke),r.Y36(p.X))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-listado-cuentas"]],decls:44,vars:9,consts:[["color","medium",3,"fullscreen"],[1,"resumen-cuentas"],["color","secondary",4,"ngIf"],["color","success"],["color","warning"],["color","light","placeholder","Cuenta, propietario o direcci\xf3n","animated","",3,"ionChange"],[1,"contenedor"],["class","coincidencia",4,"ngFor","ngForOf"],[3,"items"],["color","white",4,"virtualItem"],["scrollable",""],[3,"click"],["color","light","name","home"],["color","light",2,"font-size","2px"],["color","light","name","layers"],["color","light","name","map"],["color","light","name","warning"],["src","../../../assets/img/sos.png","alt","",2,"width","30px","height","30px","margin-bottom","-15px"],["color","light",2,"font-size","3px","margin-bottom","-1px"],["color","secondary"],[1,"coincidencia"],[4,"ngIf"],["color","white"],["side","start"],["color","secondary",3,"click"],["slot","icon-only","name","walk",1,"icon-listado"],["color","light",3,"click"],["src","../../assets/img/ruta.png","alt","",2,"width","90%","height","60px"],["color","medium"],["color","light",1,"border"],["color","light",1,"border","direccion"],["class","realizada",4,"ngIf"],["side","end"],["color","tertiary",3,"click"],["slot","icon-only","name","reader-outline",1,"icon-listado"],[1,"realizada"]],template:function(t,i){1&t&&(r._UZ(0,"hr"),r._UZ(1,"hr"),r._UZ(2,"hr"),r._UZ(3,"hr"),r._UZ(4,"hr"),r.TgZ(5,"ion-content",0),r.TgZ(6,"div",1),r.YNc(7,Z,2,1,"ion-chip",2),r.TgZ(8,"ion-chip",3),r._uU(9),r.qZA(),r.TgZ(10,"ion-chip",4),r._uU(11),r.qZA(),r.qZA(),r.TgZ(12,"ion-searchbar",5),r.NdJ("ionChange",function(t){return i.find(t)}),r.qZA(),r.TgZ(13,"div",6),r.YNc(14,_,2,1,"div",7),r.TgZ(15,"ion-virtual-scroll",8),r.ALo(16,"filtro"),r.YNc(17,T,24,10,"ion-item-sliding",9),r.qZA(),r.qZA(),r.qZA(),r.TgZ(18,"ion-segment",10),r.TgZ(19,"ion-segment-button",11),r.NdJ("click",function(){return i.navegar(1)}),r._UZ(20,"ion-icon",12),r.TgZ(21,"ion-label",13),r.TgZ(22,"small"),r._uU(23,"Inicio"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(24,"ion-segment-button",11),r.NdJ("click",function(){return i.navegar(2)}),r._UZ(25,"ion-icon",14),r.TgZ(26,"ion-label",13),r.TgZ(27,"small"),r._uU(28,"Cuentas"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(29,"ion-segment-button",11),r.NdJ("click",function(){return i.navegar(3)}),r._UZ(30,"ion-icon",15),r.TgZ(31,"ion-label",13),r.TgZ(32,"small"),r._uU(33,"Mapa"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(34,"ion-segment-button",11),r.NdJ("click",function(){return i.navegar(4)}),r._UZ(35,"ion-icon",16),r.TgZ(36,"ion-label",13),r.TgZ(37,"small"),r._uU(38,"S.P\xfablicos"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(39,"ion-segment-button",11),r.NdJ("click",function(){return i.navegar(5)}),r._UZ(40,"img",17),r.TgZ(41,"ion-label",18),r.TgZ(42,"small"),r._uU(43,"S.O.S."),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Q6J("fullscreen",!0),r.xp6(2),r.Q6J("ngIf",i.total),r.xp6(2),r.hij("Gestionadas: ",i.gestionadas,""),r.xp6(2),r.hij("Faltantes: ",i.total-i.gestionadas,""),r.xp6(3),r.Q6J("ngForOf",i.accountBusqueda),r.xp6(1),r.Q6J("items",r.xi3(16,6,i.account,i.findText)))},directives:[a.W2,n.O5,a.hM,a.VI,a.j9,n.sg,a.aJ,a.Rw,a.cJ,a.QI,a.GO,a.gu,a.Q$,a.td,a.IK,a.u8,a.Ie],pipes:[m,n.H9],styles:["ion-toolbar[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}ion-toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px;height:40px}.resumen-cuentas[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.sliding-cuentas[_ngcontent-%COMP%]{background-color:#323332}.contenedor[_ngcontent-%COMP%]{padding:0 10px}.coincidencia[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic;color:#00c800;text-align:center}p[_ngcontent-%COMP%]{color:#fff!important;width:100%}.direccion[_ngcontent-%COMP%]{font-size:10px}.icon-listado[_ngcontent-%COMP%]{font-size:30px}.realizada[_ngcontent-%COMP%]{font-style:italic;font-weight:600;display:inline-block;padding:0 10px;background-color:#1282c4;border-radius:20px}ion-segment[_ngcontent-%COMP%]{--background:#254061;border-top:1px solid #0000001a;height:60px;margin-bottom:-5px}ion-segment-button[_ngcontent-%COMP%]{--indicator-color:#0000!important}"]}),t})()}];let q=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[s.Bz.forChild(v)],s.Bz]}),t})(),A=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[n.ez,e.u5,a.Pc,q]]}),t})()}}]);