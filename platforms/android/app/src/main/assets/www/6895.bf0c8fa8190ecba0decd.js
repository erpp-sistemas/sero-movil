(self.webpackChunkerpp_movil=self.webpackChunkerpp_movil||[]).push([[6895],{6895:(i,t,o)=>{"use strict";o.r(t),o.d(t,{Tab3PageModule:()=>x});var e=o(54812),n=o(9069),a=o(61116),r=o(11462),s=o(64762),c=o(87368),l=o(75919),d=o(18372);function p(i,t){if(1&i&&(c.TgZ(0,"ion-select-option",8),c._uU(1),c.ALo(2,"titlecase"),c.qZA()),2&i){const i=t.$implicit;c.Q6J("value",i.id_plaza),c.xp6(1),c.hij("",c.lcZ(2,2,i.plaza)," ")}}function h(i,t){if(1&i&&c._UZ(0,"ion-icon",13),2&i){const i=c.oxw().$implicit;c.Q6J("name",i.icono_app_movil)}}function g(i,t){if(1&i&&c._UZ(0,"img",14),2&i){const i=c.oxw().$implicit;c.Q6J("src",i.icono_app_movil,c.LSH)}}function u(i,t){if(1&i){const i=c.EpF();c.TgZ(0,"ion-card",10),c.NdJ("click",function(){const t=c.CHM(i).$implicit;return c.oxw(2).irMapa(t.id_servicio)}),c.TgZ(1,"ion-card-header"),c.YNc(2,h,1,1,"ion-icon",11),c.YNc(3,g,1,1,"img",12),c.qZA(),c.TgZ(4,"ion-card-content"),c.TgZ(5,"h3"),c._uU(6),c.qZA(),c.qZA(),c.qZA()}if(2&i){const i=t.$implicit;c.xp6(2),c.Q6J("ngIf",i.icono_app_movil.length<15),c.xp6(1),c.Q6J("ngIf",i.icono_app_movil.length>12),c.xp6(3),c.hij(" ",i.servicio," ")}}function v(i,t){if(1&i&&(c.TgZ(0,"div"),c.YNc(1,u,7,3,"ion-card",9),c.qZA()),2&i){const i=c.oxw();c.xp6(1),c.Q6J("ngForOf",i.servicios)}}let m=(()=>{class i{constructor(i,t,o,e){this.router=i,this.rest=t,this.platform=o,this.storage=e,this.idPlazas=[],this.plazas=[],this.descargaAgua=!1,this.descargaPredio=!1,this.descargaAntenas=!1,this.descargaPozos=!1,this.selecciona=!1}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.platform.ready().then(()=>{this.obtenerPlazasUsuario()})})}ionViewDidEnter(){this.obtenerPlazasUsuario()}obtenerPlazasUsuario(){return(0,s.mG)(this,void 0,void 0,function*(){this.plazasServicios=yield this.rest.obtenerPlazasSQL(),console.log(this.plazasServicios),this.id_plaza=this.plazasServicios[0].id_plaza;const i=yield this.rest.mostrarServicios(this.id_plaza);this.mostrarServicios(i)})}resultPlaza(i){return(0,s.mG)(this,void 0,void 0,function*(){console.log(i.detail.value),0!=this.id_plaza&&this.asignarSectores(this.id_plaza)})}asignarSectores(i){return(0,s.mG)(this,void 0,void 0,function*(){this.selecciona=0==i,this.servicios=yield this.rest.mostrarServicios(i),this.mostrarServicios(this.servicios)})}mostrarServicios(i){return(0,s.mG)(this,void 0,void 0,function*(){console.log(i),this.servicios=yield this.rest.mostrarServicios(this.id_plaza)})}irMapa(i){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.rest.mostrarServicios(this.id_plaza);console.log(t),yield this.storage.set("NombrePlazaActiva",t[0].plaza),yield this.storage.set("IdPlazaActiva",t[0].id_plaza),yield this.storage.set("IdServicioActivo",i),console.log("IdServicioActivo "+i),console.log("IdPlazaActiva "+t[0].id_plaza),console.log("NombrePlazaActiva "+t[0].plaza),this.router.navigate(["mapa-prueba",i,this.id_plaza])})}}return i.\u0275fac=function(t){return new(t||i)(c.Y36(n.F0),c.Y36(l.v),c.Y36(e.t4),c.Y36(d.Ke))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-tab3"]],decls:15,vars:3,consts:[["color","medium"],["color","dark",2,"text-align","center"],[2,"color","white","font-size","16px"],[1,"texto-centrado"],[1,"datos"],["interface","popover","placeholder","Seleccionar plaza",1,"myCustomSelect","text-center",2,"color","#000000",3,"ngModel","ionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],["color","medium",3,"click",4,"ngFor","ngForOf"],["color","medium",3,"click"],["color","light",3,"name",4,"ngIf"],["style","width: 50px;",3,"src",4,"ngIf"],["color","light",3,"name"],[2,"width","50px",3,"src"]],template:function(i,t){1&i&&(c._UZ(0,"hr"),c._UZ(1,"hr"),c._UZ(2,"hr"),c._UZ(3,"hr"),c.TgZ(4,"ion-content",0),c.TgZ(5,"ion-card",0),c.TgZ(6,"ion-card-subtitle",1),c.TgZ(7,"p",2),c._uU(8,"Seleccione el mapa"),c.qZA(),c.qZA(),c.qZA(),c._UZ(9,"hr"),c.TgZ(10,"div",3),c.TgZ(11,"p",4),c.TgZ(12,"ion-select",5),c.NdJ("ionChange",function(i){return t.resultPlaza(i)})("ngModelChange",function(i){return t.id_plaza=i}),c.YNc(13,p,3,4,"ion-select-option",6),c.qZA(),c.qZA(),c.qZA(),c.YNc(14,v,2,1,"div",7),c.qZA()),2&i&&(c.xp6(12),c.Q6J("ngModel",t.id_plaza),c.xp6(1),c.Q6J("ngForOf",t.plazasServicios),c.xp6(1),c.Q6J("ngIf",0!=t.id_plaza))},directives:[e.W2,e.PM,e.tO,e.t9,e.QI,r.JJ,r.On,a.sg,a.O5,e.n0,e.Zi,e.FN,e.gu],pipes:[a.rS],styles:["ion-card-header[_ngcontent-%COMP%]{text-align:center!important}.texto-centrado[_ngcontent-%COMP%]{text-align:center;background-color:#00c800;width:60%;margin:0 auto;border-radius:10px}.datos[_ngcontent-%COMP%]{font-size:15px;text-align:center}h3[_ngcontent-%COMP%]{color:#fff}ion-card-content[_ngcontent-%COMP%], ion-card-header[_ngcontent-%COMP%]{text-align:center}ion-card-content[_ngcontent-%COMP%]{border-bottom:1px solid #025f1e}ion-icon[_ngcontent-%COMP%]{font-size:40px}"]}),i})();var f=o(60940);const _=[{path:"",component:m}];let z=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[n.Bz.forChild(_)],n.Bz]}),i})();var Z=o(5530);let x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[e.Pc,a.ez,r.u5,f.e,n.Bz.forChild([{path:"",component:m}]),z,Z.K]]}),i})()}}]);