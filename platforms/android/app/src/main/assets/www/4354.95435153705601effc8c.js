(self.webpackChunkerpp_movil=self.webpackChunkerpp_movil||[]).push([[4354],{74354:(o,t,i)=>{"use strict";i.r(t),i.d(t,{SyncFotosAccionesPageModule:()=>f});var n=i(61116),e=i(11462),s=i(54812),r=i(9069),l=i(64762),a=i(39300),c=i(87368),g=i(75919),u=i(9935),m=i(90074),d=i(18590);function h(o,t){if(1&o){const o=c.EpF();c.TgZ(0,"ion-item-sliding",0),c.TgZ(1,"ion-item",0),c.TgZ(2,"ion-thumbnail",17),c.TgZ(3,"img",18),c.NdJ("click",function(){const t=c.CHM(o).$implicit;return c.oxw().openPreview(t.imagenLocal)}),c.qZA(),c.qZA(),c.TgZ(4,"ion-label"),c.TgZ(5,"p"),c._uU(6),c.qZA(),c.TgZ(7,"p",19),c.TgZ(8,"strong"),c._uU(9,"Cuenta: "),c.qZA(),c._uU(10),c.qZA(),c.TgZ(11,"p",19),c.TgZ(12,"strong"),c._uU(13,"Fecha: "),c.qZA(),c._uU(14),c.qZA(),c.TgZ(15,"p",19),c.TgZ(16,"strong"),c._uU(17,"Tipo: "),c.qZA(),c._uU(18),c.qZA(),c.TgZ(19,"p",19),c.TgZ(20,"strong"),c._uU(21,"Plaza: "),c.qZA(),c._uU(22),c.ALo(23,"titlecase"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(24,"ion-item-options",20),c.TgZ(25,"ion-item-option",21),c.NdJ("click",function(){const t=c.CHM(o).$implicit;return c.oxw().deletePhoto(t.id,t.rutaBase64)}),c._UZ(26,"ion-icon",22),c.qZA(),c.qZA(),c.TgZ(27,"ion-item-options",23),c.TgZ(28,"ion-item-option",24),c.NdJ("click",function(){const t=c.CHM(o).$implicit;return c.oxw().uploadPhoto(t.id)}),c._UZ(29,"ion-icon",25),c.qZA(),c.qZA(),c.qZA()}if(2&o){const o=t.$implicit,i=t.index;c.xp6(3),c.s9C("src",o.imagenLocal,c.LSH),c.xp6(3),c.Oqu(i+1),c.xp6(4),c.Oqu(o.cuenta),c.xp6(4),c.Oqu(o.fecha),c.xp6(4),c.Oqu(o.tipo),c.xp6(4),c.Oqu(c.lcZ(23,6,o.nombre_plaza))}}const Z=[{path:"",component:(()=>{class o{constructor(o,t,i,n,e,s,r){this.rest=o,this.loadingCtrl=t,this.mensaje=i,this.modalCtrl=n,this.router=e,this.callNumber=s,this.network=r,this.contadorFotos=0,this.totalFotos=0,this.isHide=!1}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){console.log(this.network.type),yield this.getTotalFotos(),yield this.getInfo(),console.log(this.infoImages)})}getInfo(){return(0,l.mG)(this,void 0,void 0,function*(){this.loading=yield this.loadingCtrl.create({message:"Cargando las fotos..."}),this.loading.present(),this.infoImages=yield this.rest.getImagesLocal(),0==this.infoImages.length&&(this.mensaje.showAlert("No tienes fotos a sincronizar"),this.router.navigateByUrl("sincronizar-fotos")),this.loading.dismiss()})}getTotalFotos(){return(0,l.mG)(this,void 0,void 0,function*(){this.totalFotos=yield this.rest.getTotalFotosAcciones(),console.log("Fotos acciones ",this.totalFotos)})}openPreview(o){console.log(o),this.modalCtrl.create({component:a.s,componentProps:{imagen:o}}).then(o=>{o.present()})}uploadPhoto(o){return(0,l.mG)(this,void 0,void 0,function*(){const t=yield this.loadingCtrl.create({message:"Enviando foto...",spinner:"dots"});yield t.present(),yield this.rest.uploadPhoto(o),this.getInfo(),yield this.getTotalFotos(),t.dismiss()})}deletePhoto(o,t){return(0,l.mG)(this,void 0,void 0,function*(){const i=yield this.loadingCtrl.create({message:"Eliminando la foto...",spinner:"dots"});i.present(),this.rest.deletePhoto(o,t),this.getInfo(),yield this.getTotalFotos(),i.dismiss()})}syncFotos(){let o=this.network.type;console.log(o),"wifi"!==o&&this.mensaje.showToastLarge("No estas conectado a una red wifi, recuerda que se recomienda enviar tus fotos con wifi"),this.rest.uploadPhotos().then(()=>{this.router.navigateByUrl("/sincronizar-fotos")})}navegar(o){1==o?this.router.navigateByUrl("home/tab1"):2==o?this.router.navigateByUrl("home/tab2"):3==o?this.router.navigateByUrl("home/tab3"):4==o?this.router.navigateByUrl("home/tab4"):5==o&&this.callNumber.callNumber("911",!0).then(o=>console.log("Launched dialer!",o)).catch(o=>console.log("Error launching dialer",o))}}return o.\u0275fac=function(t){return new(t||o)(c.Y36(g.v),c.Y36(s.HT),c.Y36(u.K),c.Y36(s.IN),c.Y36(r.F0),c.Y36(m.X),c.Y36(d.Z))},o.\u0275cmp=c.Xpm({type:o,selectors:[["app-sync-fotos-acciones"]],decls:43,vars:2,consts:[["color","medium"],["color","medium",2,"text-align","center"],[3,"click"],[2,"color","white"],["color","success","slot","end","name","cloud-upload"],[2,"text-align","center"],["color","secondary"],[3,"items"],["color","medium",4,"virtualItem"],["scrollable",""],["color","light","name","home"],["color","light",2,"font-size","2px"],["color","light","name","layers"],["color","light","name","map"],["color","light","name","warning"],["src","../../../assets/img/sos.png","alt","",2,"width","30px","height","30px","margin-bottom","-15px"],["color","light",2,"font-size","3px","margin-bottom","-1px"],["slot","start"],["tappable","",3,"src","click"],[2,"font-size","12px"],["side","start"],["color","danger",3,"click"],["slot","icon-only","name","trash",1,"trash"],["side","end"],["color","primary",3,"click"],["slot","icon-only","name","cloud-upload",1,"upload"]],template:function(o,t){1&o&&(c._UZ(0,"hr"),c._UZ(1,"hr"),c._UZ(2,"hr"),c._UZ(3,"hr"),c.TgZ(4,"ion-content",0),c.TgZ(5,"ion-card",0),c.TgZ(6,"ion-card-header",1),c.TgZ(7,"ion-button",2),c.NdJ("click",function(){return t.syncFotos()}),c.TgZ(8,"p",3),c._uU(9,"Enviar fotos acciones"),c.qZA(),c._UZ(10,"ion-icon",4),c.qZA(),c.qZA(),c.qZA(),c._UZ(11,"hr"),c.TgZ(12,"div",5),c.TgZ(13,"ion-chip",6),c._uU(14),c.qZA(),c.qZA(),c.TgZ(15,"ion-virtual-scroll",7),c.YNc(16,h,30,8,"ion-item-sliding",8),c.qZA(),c.qZA(),c.TgZ(17,"ion-segment",9),c.TgZ(18,"ion-segment-button",2),c.NdJ("click",function(){return t.navegar(1)}),c._UZ(19,"ion-icon",10),c.TgZ(20,"ion-label",11),c.TgZ(21,"small"),c._uU(22,"Inicio"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"ion-segment-button",2),c.NdJ("click",function(){return t.navegar(2)}),c._UZ(24,"ion-icon",12),c.TgZ(25,"ion-label",11),c.TgZ(26,"small"),c._uU(27,"Cuentas"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"ion-segment-button",2),c.NdJ("click",function(){return t.navegar(3)}),c._UZ(29,"ion-icon",13),c.TgZ(30,"ion-label",11),c.TgZ(31,"small"),c._uU(32,"Mapa"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(33,"ion-segment-button",2),c.NdJ("click",function(){return t.navegar(4)}),c._UZ(34,"ion-icon",14),c.TgZ(35,"ion-label",11),c.TgZ(36,"small"),c._uU(37,"S.P\xfablicos"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(38,"ion-segment-button",2),c.NdJ("click",function(){return t.navegar(5)}),c._UZ(39,"img",15),c.TgZ(40,"ion-label",16),c.TgZ(41,"small"),c._uU(42,"S.O.S."),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&o&&(c.xp6(14),c.hij(" Fotos tomadas: ",t.totalFotos," "),c.xp6(1),c.Q6J("items",t.infoImages))},directives:[s.W2,s.PM,s.Zi,s.YG,s.gu,s.hM,s.aJ,s.Rw,s.cJ,s.QI,s.GO,s.Q$,s.td,s.Ie,s.Bs,s.IK,s.u8],pipes:[n.rS],styles:["p[_ngcontent-%COMP%]{color:#fff!important}.trash[_ngcontent-%COMP%]{color:red!important}.upload[_ngcontent-%COMP%]{color:#00c800}ion-segment[_ngcontent-%COMP%]{--background:#254061;border-top:1px solid #0000001a;height:60px;margin-bottom:-5px}ion-segment-button[_ngcontent-%COMP%]{--indicator-color:#0000!important}"]}),o})()}];let p=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[[r.Bz.forChild(Z)],r.Bz]}),o})(),f=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[[n.ez,e.u5,s.Pc,p]]}),o})()}}]);