(self.webpackChunkerpp_movil=self.webpackChunkerpp_movil||[]).push([[7925],{67925:(e,o,i)=>{"use strict";i.d(o,{c:()=>N});var n=i(64762),t=i(38643),a=i(87368),r=i(18372),s=i(9935),l=i(2977),c=i(54812),g=i(75919),d=i(11585),Z=i(3759),u=i(9069),h=i(90074),m=i(11462),p=i(61116);const A=["segmentPrincipal"];function T(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"ion-item",0),a.TgZ(1,"ion-label"),a.TgZ(2,"p"),a._uU(3,"Especifique: "),a.qZA(),a.qZA(),a.TgZ(4,"ion-input",9),a.NdJ("ngModelChange",function(o){return a.CHM(e),a.oxw().otroPuesto=o}),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(4),a.Q6J("ngModel",e.otroPuesto)}}function q(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"ion-item",0),a.TgZ(2,"ion-label"),a.TgZ(3,"p"),a._uU(4,"Giro: "),a.qZA(),a.qZA(),a.TgZ(5,"ion-input",9),a.NdJ("ngModelChange",function(o){return a.CHM(e),a.oxw().giro=o}),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Q6J("ngModel",e.giro)}}function f(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"ion-item",0),a.TgZ(2,"ion-label"),a.TgZ(3,"p"),a._uU(4,"Lectura medidor: "),a.qZA(),a.qZA(),a.TgZ(5,"ion-input",9),a.NdJ("ngModelChange",function(o){return a.CHM(e),a.oxw().lectura_medidor=o}),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Q6J("ngModel",e.lectura_medidor)}}function b(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"ion-item",25),a.TgZ(2,"p"),a._uU(3," Negaron acceso "),a.qZA(),a.qZA(),a.TgZ(4,"ion-item",0),a.TgZ(5,"ion-segment",54),a.NdJ("ionChange",function(o){return a.CHM(e),a.oxw().resultNegaronAcceso(o)}),a.TgZ(6,"ion-segment-button",55),a.TgZ(7,"ion-label",28),a._uU(8,"Si"),a.qZA(),a.qZA(),a.TgZ(9,"ion-segment-button",56),a.TgZ(10,"ion-label",30),a._uU(11,"No"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"ion-item",25),a.TgZ(13,"p"),a._uU(14," Medidor descompuesto "),a.qZA(),a.qZA(),a.TgZ(15,"ion-item",0),a.TgZ(16,"ion-segment",57),a.NdJ("ionChange",function(o){return a.CHM(e),a.oxw().resultMedidorDescompuesto(o)}),a.TgZ(17,"ion-segment-button",58),a.TgZ(18,"ion-label",28),a._uU(19,"Si"),a.qZA(),a.qZA(),a.TgZ(20,"ion-segment-button",59),a.TgZ(21,"ion-label",30),a._uU(22,"No"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(23,"hr"),a.TgZ(24,"ion-item",25),a.TgZ(25,"p"),a._uU(26," Diferencia de di\xe1metro "),a.qZA(),a.qZA(),a.TgZ(27,"ion-item",0),a.TgZ(28,"ion-segment",60),a.NdJ("ionChange",function(o){return a.CHM(e),a.oxw().resultDiferenciaDiametro(o)}),a.TgZ(29,"ion-segment-button",61),a.TgZ(30,"ion-label",28),a._uU(31,"Si"),a.qZA(),a.qZA(),a.TgZ(32,"ion-segment-button",62),a.TgZ(33,"ion-label",30),a._uU(34,"No"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(35,"hr"),a.TgZ(36,"ion-item",25),a.TgZ(37,"p"),a._uU(38," Toma clandestina "),a.qZA(),a.qZA(),a.TgZ(39,"ion-item",0),a.TgZ(40,"ion-segment",63),a.NdJ("ionChange",function(o){return a.CHM(e),a.oxw().resultTomaClandestina(o)}),a.TgZ(41,"ion-segment-button",64),a.TgZ(42,"ion-label",28),a._uU(43,"Si"),a.qZA(),a.qZA(),a.TgZ(44,"ion-segment-button",65),a.TgZ(45,"ion-label",30),a._uU(46,"No"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(47,"hr"),a.TgZ(48,"ion-item",25),a.TgZ(49,"p"),a._uU(50," Derivaci\xf3n clandestina "),a.qZA(),a.qZA(),a.TgZ(51,"ion-item",0),a.TgZ(52,"ion-segment",66),a.NdJ("ionChange",function(o){return a.CHM(e),a.oxw().resultDerivacionClandestina(o)}),a.TgZ(53,"ion-segment-button",67),a.TgZ(54,"ion-label",28),a._uU(55,"Si"),a.qZA(),a.qZA(),a.TgZ(56,"ion-segment-button",68),a.TgZ(57,"ion-label",30),a._uU(58,"No"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(59,"hr"),a.TgZ(60,"ion-item",25),a.TgZ(61,"p"),a._uU(62," Drenaje clandestino "),a.qZA(),a.qZA(),a.TgZ(63,"ion-item",0),a.TgZ(64,"ion-segment",69),a.NdJ("ionChange",function(o){return a.CHM(e),a.oxw().resultDrenajeClandestino(o)}),a.TgZ(65,"ion-segment-button",70),a.TgZ(66,"ion-label",28),a._uU(67,"Si"),a.qZA(),a.qZA(),a.TgZ(68,"ion-segment-button",71),a.TgZ(69,"ion-label",30),a._uU(70,"No"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(71,"hr"),a.TgZ(72,"ion-item",25),a.TgZ(73,"p"),a._uU(74," Cambio de giro "),a.qZA(),a.qZA(),a.TgZ(75,"ion-item",0),a.TgZ(76,"ion-segment",72),a.NdJ("ionChange",function(o){return a.CHM(e),a.oxw().resultCambioGiro(o)}),a.TgZ(77,"ion-segment-button",73),a.TgZ(78,"ion-label",28),a._uU(79,"Si"),a.qZA(),a.qZA(),a.TgZ(80,"ion-segment-button",74),a.TgZ(81,"ion-label",30),a._uU(82,"No"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(83,"hr"),a.TgZ(84,"ion-item",25),a.TgZ(85,"p"),a._uU(86," Falta de documentaci\xf3n "),a.qZA(),a.qZA(),a.TgZ(87,"ion-item",0),a.TgZ(88,"ion-segment",75),a.NdJ("ionChange",function(o){return a.CHM(e),a.oxw().resultFaltaDocumentacion(o)}),a.TgZ(89,"ion-segment-button",76),a.TgZ(90,"ion-label",28),a._uU(91,"Si"),a.qZA(),a.qZA(),a.TgZ(92,"ion-segment-button",77),a.TgZ(93,"ion-label",30),a._uU(94,"No"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}}function v(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"ion-button",78),a.NdJ("click",function(){return a.CHM(e),a.oxw().muestraInspectores()}),a._uU(1,"Cargar lista de inspectores"),a.qZA()}}function C(e,o){if(1&e&&(a.TgZ(0,"ion-select-option",80),a._uU(1),a.qZA()),2&e){const e=o.$implicit;a.Q6J("value",e.idAspUser),a.xp6(1),a.hij(" ",e.nombre_empleado," ")}}function _(e,o){if(1&e&&(a.TgZ(0,"ion-select-option",80),a._uU(1),a.qZA()),2&e){const e=o.$implicit;a.Q6J("value",e.idAspUser),a.xp6(1),a.hij(" ",e.nombre_empleado," ")}}function U(e,o){if(1&e&&(a.TgZ(0,"ion-select-option",80),a._uU(1),a.qZA()),2&e){const e=o.$implicit;a.Q6J("value",e.idAspUser),a.xp6(1),a.hij(" ",e.nombre_empleado," ")}}function x(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"ion-card",0),a.TgZ(1,"ion-card-header"),a.TgZ(2,"ion-card-subtitle"),a.TgZ(3,"ion-label"),a.TgZ(4,"p"),a._uU(5," Inspectores de la visita "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"ion-card-content"),a.TgZ(7,"ion-item",0),a.TgZ(8,"ion-label"),a.TgZ(9,"p"),a._uU(10," Inspector 1 "),a.qZA(),a.TgZ(11,"p"),a.TgZ(12,"ion-text",18),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"ion-item",0),a.TgZ(15,"ion-label"),a.TgZ(16,"p"),a._uU(17," Inspector 2 "),a.qZA(),a.TgZ(18,"p"),a.TgZ(19,"ion-select",24),a.NdJ("ngModelChange",function(o){return a.CHM(e),a.oxw().inspector2=o}),a.YNc(20,C,2,2,"ion-select-option",79),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(21,"ion-item",0),a.TgZ(22,"ion-label"),a.TgZ(23,"p"),a._uU(24," Inspector 3 "),a.qZA(),a.TgZ(25,"p"),a.TgZ(26,"ion-select",24),a.NdJ("ngModelChange",function(o){return a.CHM(e),a.oxw().inspector3=o}),a.YNc(27,_,2,2,"ion-select-option",79),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(28,"ion-item",0),a.TgZ(29,"ion-label"),a.TgZ(30,"p"),a._uU(31," Inspector 4 "),a.qZA(),a.TgZ(32,"p"),a.TgZ(33,"ion-select",24),a.NdJ("ngModelChange",function(o){return a.CHM(e),a.oxw().inspector4=o}),a.YNc(34,U,2,2,"ion-select-option",79),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(13),a.hij(" ",e.nombreInspectorLogueado," "),a.xp6(6),a.Q6J("ngModel",e.inspector2),a.xp6(1),a.Q6J("ngForOf",e.nombreInspectores),a.xp6(6),a.Q6J("ngModel",e.inspector3),a.xp6(1),a.Q6J("ngForOf",e.nombreInspectores),a.xp6(6),a.Q6J("ngModel",e.inspector4),a.xp6(1),a.Q6J("ngForOf",e.nombreInspectores)}}function P(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"ion-fab-button",83),a.NdJ("click",function(){a.CHM(e);const o=a.oxw().$implicit;return a.oxw().deletePhoto(o.imagen)}),a._UZ(1,"ion-icon",84),a.qZA()}}function M(e,o){if(1&e&&(a.TgZ(0,"ion-slide"),a._UZ(1,"img",81),a.YNc(2,P,2,0,"ion-fab-button",82),a.qZA()),2&e){const e=o.$implicit;a.xp6(1),a.s9C("src",e.imagen,a.LSH),a.xp6(1),a.Q6J("ngIf","assets/img/imgs.png"!=e.imagen)}}let N=(()=>{class e{constructor(e,o,i,n,t,a,r,s,l,c,g,d,Z){this.storage=e,this.mensaje=o,this.geolocation=i,this.modalController=n,this.platform=t,this.loadingController=a,this.rest=r,this.camera=s,this.webview=l,this.navCtrl=c,this.router=g,this.callNumber=d,this.alertCtrl=Z,this.account="",this.propietario="",this.personaAtiende="",this.idPuesto=0,this.otroPuesto="",this.idMotivoNoPago=0,this.otroMotivo="",this.idTipoServicio=0,this.numeroNiveles=1,this.colorFachada="",this.colorPuerta="",this.referencia="",this.idTipoPredio=0,this.entreCalle1="",this.entreCalle2="",this.hallazgoNinguna=0,this.hallazgoMedidorDescompuesto=0,this.hallazgoDiferenciaDiametro=0,this.hallazgoTomaClandestina=0,this.hallazgoDerivacionClandestina=0,this.hallazgoDrenajeClandestino=0,this.hallazgoCambioGiro=0,this.hallazgoFaltaDocumentacion=0,this.hallazgoNegaronAcceso=0,this.observacion="",this.lectura_medidor="",this.nombreInspectores=[],this.nombreInspectorLogueado="",this.inspector2="",this.inspector3="",this.inspector4="",this.tipoServicioPadron="",this.fechaCaptura="",this.idAspuser="",this.image="",this.isPhoto=!1,this.isMotive=!1,this.nombreTareaAsignada="",this.indicadorImagen=0,this.takePhoto=!1,this.activaOtroMotivo=!1,this.idServicioPlaza=0,this.activaOtrosHallazgos=!1,this.mostrarInspectores=!1,this.inspectores=!1,this.detectedChanges=!1,this.mostrarOtroPuesto=!1,this.mostrarIrregularidades=!0,this.giro="",this.mostrarGiro=!1,this.geoPosicion={},this.sliderOpts={zoom:!0,slidesPerView:1.55,spaceBetween:10,centeredSlides:!0},this.imgs=[{imagen:"assets/img/imgs.png"}]}ngOnInit(){return(0,n.mG)(this,void 0,void 0,function*(){yield this.platform.ready(),yield this.getInfoAccount(),this.getFechaActual(),this.getPlaza(),this.idServicioPlaza=yield this.storage.get("IdServicioActivo"),this.estatusLecturaMedidor()})}estatusLecturaMedidor(){return(0,n.mG)(this,void 0,void 0,function*(){this.plazaAgua=1===this.idServicioPlaza})}resultIdPuesto(e){this.mostrarOtroPuesto=6==e.detail.value}resultTipoServicio(e){this.mostrarGiro="8"!==e.detail.value}resultMotivoNoPago(e){this.activaOtroMotivo=5==e.detail.value}resultNinguna(e){"ningunaSi"==e.detail.value?(this.hallazgoNinguna=1,this.mostrarIrregularidades=!1):(this.hallazgoNinguna=0,this.mostrarIrregularidades=!0)}resultNegaronAcceso(e){this.hallazgoNegaronAcceso="negaronAccesoSi"==e.detail.value?1:0}resultMedidorDescompuesto(e){this.hallazgoMedidorDescompuesto="medidorDescompuestoSi"==e.detail.value?1:0}resultDiferenciaDiametro(e){this.hallazgoDiferenciaDiametro="diferenciaDiametroSi"==e.detail.value?1:0}resultTomaClandestina(e){this.hallazgoTomaClandestina="tomaClandestinaSi"==e.detail.value?1:0}resultDerivacionClandestina(e){this.hallazgoDerivacionClandestina="derivacionClandestinaSi"==e.detail.value?1:0}resultDrenajeClandestino(e){this.hallazgoDrenajeClandestino="DrenajeClandestinoSi"==e.detail.value?1:0}resultCambioGiro(e){this.hallazgoCambioGiro="cambioGiroSi"==e.detail.value?1:0}resultFaltaDocumentacion(e){this.hallazgoFaltaDocumentacion="faltaDocumentacionSi"==e.detail.value?1:0}getPlaza(){return(0,n.mG)(this,void 0,void 0,function*(){this.nombrePlaza=yield this.storage.get("NombrePlazaActiva"),this.id_plaza=yield this.storage.get("IdPlazaActiva")})}ionViewWillLeave(){this.detectedChanges&&this.mensaje.showAlert("La gesti\xf3n no se guardar\xe1, tendras que capturar de nuevo")}exit(){this.navCtrl.navigateRoot(["/home/tab2"])}muestraInspectores(){return(0,n.mG)(this,void 0,void 0,function*(){this.mostrarInspectores=!0,this.inspectores=!0,this.nombreInspectorLogueado=yield this.storage.get("Nombre");try{this.nombreInspectores=yield this.rest.mostrarEmpleadosPlaza(this.id_plaza),console.log(this.nombreInspectores)}catch(e){console.log("Error al traer los datos de los inspectores")}})}ocultaInspectores(){this.mostrarInspectores=!1,this.inspectores=!1}getInfoAccount(){return(0,n.mG)(this,void 0,void 0,function*(){this.account=yield this.storage.get("account"),this.idAspuser=yield this.storage.get("IdAspUser"),this.infoAccount=yield this.rest.getInfoAccount(this.account),this.propietario=this.infoAccount[0].propietario,console.log("Propietario ",this.propietario),this.idAccountSqlite=this.infoAccount[0].id,this.tareaAsignada=this.infoAccount[0].tarea_asignada,this.nombreTareaAsignada=this.infoAccount[0].nombre_tarea_asignada,this.tipoServicioPadron=this.infoAccount[0].tipo_servicio,1==this.infoAccount[0].gestionada&&(this.mensaje.showAlert("Esta cuenta ya ha sido gestionada"),this.router.navigateByUrl("home/tab2"))})}getFechaActual(){var e=(new Date).toISOString();let o=new Date(e),i=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()));this.fechaActual=i.toISOString();let n=this.fechaActual.split("T");this.fechaActual=n[0]}deletePhoto(e){return(0,n.mG)(this,void 0,void 0,function*(){for(let o=0;o<this.imgs.length;o++)this.imgs[o].imagen==e&&this.imgs.splice(o,1);this.infoImage=yield this.rest.getImageLocal(e)})}confirmaFoto(e){return(0,n.mG)(this,void 0,void 0,function*(){const o=yield this.alertCtrl.create({header:"Tomar foto",subHeader:"Selecciona el modo para tomar foto ",buttons:[{text:"Camara",cssClass:"secondary",handler:()=>{this.takePic(e)}},{text:"Galeria",cssClass:"secondary",handler:()=>{this.takePicGallery(e)}}]});yield o.present()})}takePicGallery(e){return(0,n.mG)(this,void 0,void 0,function*(){let o;1==e?o="Inspecci\xf3n recorrido":2==e?o="Inspecci\xf3n evidencia":3==e?o="Inspecci\xf3n toma":4==e&&(o="Inspecci\xf3n observaci\xf3n contribuyente");var i=(new Date).toISOString();let n=new Date(i),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())).toISOString();this.camera.getPicture({quality:40,correctOrientation:!0,destinationType:this.camera.DestinationType.FILE_URI,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(e=>{this.indicadorImagen=this.indicadorImagen+1;let i=e;this.image=this.webview.convertFileSrc(e),this.isPhoto=!1,this.takePhoto=!0,this.imgs.push({imagen:this.image}),1==this.indicadorImagen&&this.imgs.splice(0,1),this.saveImage(this.id_plaza,this.nombrePlaza,this.image,this.account,t,i,this.idAspuser,this.tareaAsignada,o,this.idServicioPlaza)}).catch(e=>{console.error(e)})})}takePic(e){return(0,n.mG)(this,void 0,void 0,function*(){let o;1==e?o="Inspecci\xf3n recorrido":2==e?o="Inspecci\xf3n evidencia":3==e?o="Inspecci\xf3n toma":4==e&&(o="Inspecci\xf3n observaci\xf3n contribuyente");var i=(new Date).toISOString();let n=new Date(i),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())).toISOString();this.camera.getPicture({quality:40,correctOrientation:!0,destinationType:this.camera.DestinationType.FILE_URI,sourceType:this.camera.PictureSourceType.CAMERA,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(e=>{this.indicadorImagen=this.indicadorImagen+1;let i=e;this.image=this.webview.convertFileSrc(e),this.isPhoto=!1,this.takePhoto=!0,this.imgs.push({imagen:this.image}),1==this.indicadorImagen&&this.imgs.splice(0,1),this.saveImage(this.id_plaza,this.nombrePlaza,this.image,this.account,t,i,this.idAspuser,this.tareaAsignada,o,this.idServicioPlaza)}).catch(e=>{console.error(e)})})}saveImage(e,o,i,n,t,a,r,s,l,c){this.rest.saveImage(e,o,i,n,t,a,r,s,l,c).then(e=>{this.mensaje.showToast("Se almacen\xf3 la imagen correctamente")})}verify(){return(0,n.mG)(this,void 0,void 0,function*(){if(!1===this.takePhoto)return void this.mensaje.showAlert("Debes de tomar m\xednimo una foto para terminar la gesti\xf3n");var e=(new Date).toISOString();let o=new Date(e),i=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()));this.fechaCaptura=i.toISOString();let n=yield this.loadingController.create({message:"Obteniendo ubicaci\xf3n...",spinner:"dots"});yield n.present(),yield this.getGeolocation(),this.geoPosicion.coords?(this.latitud=this.geoPosicion.coords.latitude,this.longitud=this.geoPosicion.coords.longitude):(console.log("No se pudo obtener la geolocalizaci\xf3n"),this.latitud=0,this.longitud=0),n.dismiss(),this.loading=yield this.loadingController.create({message:"Guardando la gesti\xf3n",spinner:"dots"}),yield this.loading.present();let t={id_plaza:this.id_plaza,nombrePlaza:this.nombrePlaza,account:this.account,personaAtiende:this.personaAtiende,idPuesto:this.idPuesto,otroPuesto:this.otroPuesto,idTipoServicio:this.idTipoServicio,numeroNiveles:this.numeroNiveles,colorFachada:this.colorFachada,colorPuerta:this.colorPuerta,referencia:this.referencia,idTipoPredio:this.idTipoPredio,entreCalle1:this.entreCalle1,entrecalle2:this.entreCalle2,hallazgoNinguna:this.hallazgoNinguna,hallazgoNegaronAcceso:this.hallazgoNegaronAcceso,hallazgoMedidorDescompuesto:this.hallazgoMedidorDescompuesto,hallazgoDiferenciaDiametro:this.hallazgoDiferenciaDiametro,hallazgoTomaClandestina:this.hallazgoTomaClandestina,hallazgoDerivacionClandestina:this.hallazgoDerivacionClandestina,hallazgoDrenajeClandestino:this.hallazgoDrenajeClandestino,hallazgoCambioGiro:this.hallazgoCambioGiro,hallazgoFaltaDocumentacion:this.hallazgoFaltaDocumentacion,idAspUser:this.idAspuser,inspector2:this.inspector2,inspector3:this.inspector3,inspector4:this.inspector4,observacion:this.observacion,lectura_medidor:this.lectura_medidor,giro:this.giro,idTarea:this.tareaAsignada,fechaCaptura:this.fechaCaptura,latitud:this.latitud,longitud:this.longitud,idServicioPlaza:this.idServicioPlaza,id:this.idAccountSqlite};yield this.gestionInspeccion(t),this.loading.dismiss(),this.exit()})}gestionInspeccion(e){return(0,n.mG)(this,void 0,void 0,function*(){this.detectedChanges=!1,yield this.rest.gestionInspeccion(e)})}getGeolocation(){return(0,n.mG)(this,void 0,void 0,function*(){return new Promise((e,o)=>(0,n.mG)(this,void 0,void 0,function*(){try{setTimeout(()=>{e(this.geoPosicion)},8e3),this.geoPosicion=yield this.geolocation.getCurrentPosition()}catch(i){console.log(i),o(i)}}))})}salida(e){return(0,n.mG)(this,void 0,void 0,function*(){const o=yield this.alertCtrl.create({header:"Salir",subHeader:"Confirme para salir de la gesti\xf3n, se perderan los cambios ",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Confirmar",cssClass:"secondary",handler:()=>{this.navegar(e)}}]});yield o.present()})}goPhotos(){return(0,n.mG)(this,void 0,void 0,function*(){console.log(this.id_plaza),console.log(this.account);let e=this.id_plaza;const o=yield this.modalController.create({component:t.Z,componentProps:{account:this.account,idPlaza:e}});yield o.present()})}navegar(e){1==e?this.router.navigateByUrl("home/tab1"):2==e?this.router.navigateByUrl("home/tab2"):3==e?this.router.navigateByUrl("home/tab3"):4==e?this.router.navigateByUrl("home/tab4"):5==e&&this.callNumber.callNumber("911",!0).then(e=>console.log("Launched dialer!",e)).catch(e=>console.log("Error launching dialer",e))}}return e.\u0275fac=function(o){return new(o||e)(a.Y36(r.Ke),a.Y36(s.K),a.Y36(l.b),a.Y36(c.IN),a.Y36(c.t4),a.Y36(c.HT),a.Y36(g.v),a.Y36(d.V1),a.Y36(Z.k),a.Y36(c.SH),a.Y36(u.F0),a.Y36(h.X),a.Y36(c.Br))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-gestion-inspeccion-agua"]],viewQuery:function(e,o){if(1&e&&a.Gf(A,7),2&e){let e;a.iGM(e=a.CRH())&&(o.segmentPrincipal=e.first)}},decls:249,vars:26,consts:[["color","medium"],[1,"contenedor-icono-proceso",2,"text-align","center"],[1,"icono-proceso",3,"name"],[1,"contenedor-nombre-proceso"],[2,"text-align","center","margin","15 0px 0 20"],["color","success"],[2,"font-weight","bold"],["fill","outline","expand","block",1,"button-fotos-historicas",3,"click"],["slot","start","name","image"],["interface","popover",1,"myCustomSelect",3,"ngModel","ngModelChange"],["interface","action-sheet","placeholder","Selecciona uno",1,"myCustomSelect",3,"ngModel","ngModelChange","ionChange"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["color","medium",4,"ngIf"],["color","primary"],["value","7"],["value","8"],[4,"ngIf"],[2,"text-align","center"],["type","number","interface","popover",1,"myCustomSelect",3,"ngModel","ngModelChange"],["interface","action-sheet","placeholder","Selecciona uno",1,"myCustomSelect",3,"ngModel","ngModelChange"],["color","medium",2,"text-align","center"],["mode","ios","color","danger","value","ningunaNo",3,"ionChange"],["value","ningunaSi",1,"segment-si"],[1,"marca-si"],["value","ningunaNo",1,"segment-no"],[1,"marca-no"],["size","12",1,"ion-text-center"],["color","tertiary",3,"click",4,"ngIf"],["rows","5",3,"ngModel","ngModelChange"],[3,"options"],[4,"ngFor","ngForOf"],["color","medium","text-center",""],[1,"fotos-visita"],["text-center",""],["expand","block","color","warning",3,"click"],["name","camera"],["expand","block","color","primary",3,"click"],["expand","block","color","secondary",3,"click"],["expand","block","color","tertiary",3,"click"],["shape","round","color","success","expand","block",3,"click"],["scrollable",""],[3,"click"],["color","light","name","home"],["color","light",2,"font-size","2px"],["color","light","name","layers"],["color","light","name","map"],["color","light","name","warning"],["src","../../../assets/img/sos.png","alt","",2,"width","30px","height","30px","margin-bottom","-15px"],["color","light",2,"font-size","3px","margin-bottom","-1px"],["mode","ios","color","danger","value","negaronAccesoNo",3,"ionChange"],["value","negaronAccesoSi",1,"segment-si"],["value","negaronAccesoNo",1,"segment-no"],["mode","ios","color","danger","value","medidorDesconpuestoNo",3,"ionChange"],["value","medidorDescompuestoSi",1,"segment-si"],["value","medidorDesconpuestoNo",1,"segment-no"],["mode","ios","color","danger","value","diferenciaDiametroNo",3,"ionChange"],["value","diferenciaDiametroSi",1,"segment-si"],["value","diferenciaDiametroNo",1,"segment-no"],["mode","ios","color","danger","value","tomaClandestinaNo",3,"ionChange"],["value","tomaClandestinaSi",1,"segment-si"],["value","tomaClandestinaNo",1,"segment-no"],["mode","ios","color","danger","value","derivacionClandestinaNo",3,"ionChange"],["value","derivacionClandestinaSi",1,"segment-si"],["value","derivacionClandestinaNo",1,"segment-no"],["mode","ios","color","danger","value","DrenajeClandestinoNo",3,"ionChange"],["value","DrenajeClandestinoSi",1,"segment-si"],["value","DrenajeClandestinoNo",1,"segment-no"],["mode","ios","color","danger","value","cambioGiroNo",3,"ionChange"],["value","cambioGiroSi",1,"segment-si"],["value","cambioGiroNo",1,"segment-no"],["mode","ios","color","danger","value","faltaDocumentacionNo",3,"ionChange"],["value","faltaDocumentacionSi",1,"segment-si"],["value","faltaDocumentacionNo",1,"segment-no"],["color","tertiary",3,"click"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"imagen",3,"src"],["padding","","size","small","color","danger",3,"click",4,"ngIf"],["padding","","size","small","color","danger",3,"click"],["name","trash",1,"icon-trash"]],template:function(e,o){1&e&&(a._UZ(0,"hr"),a._UZ(1,"hr"),a._UZ(2,"hr"),a._UZ(3,"hr"),a.TgZ(4,"ion-content",0),a._UZ(5,"hr"),a.TgZ(6,"div",1),a._UZ(7,"ion-icon",2),a.qZA(),a.TgZ(8,"div",3),a.TgZ(9,"ion-label"),a.TgZ(10,"p"),a._uU(11),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"ion-card",0),a.TgZ(13,"div",4),a.TgZ(14,"ion-chip",5),a._uU(15,"Informaci\xf3n de la gesti\xf3n a realizar"),a.qZA(),a.qZA(),a.TgZ(16,"ion-card-content"),a.TgZ(17,"ion-item",0),a.TgZ(18,"ion-label"),a.TgZ(19,"p"),a._uU(20," Plaza: "),a.TgZ(21,"span",6),a._uU(22),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"ion-item",0),a.TgZ(24,"ion-label"),a.TgZ(25,"p"),a._uU(26," Acci\xf3n a realizar: "),a.TgZ(27,"span",6),a._uU(28),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(29,"ion-item",0),a.TgZ(30,"ion-label"),a.TgZ(31,"p"),a._uU(32," Cuenta a gestionar: "),a.TgZ(33,"span",6),a._uU(34),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(35,"ion-item",0),a.TgZ(36,"ion-label"),a.TgZ(37,"p"),a._uU(38," Propietario: "),a.TgZ(39,"span",6),a._uU(40),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(41,"ion-button",7),a.NdJ("click",function(){return o.goPhotos()}),a._UZ(42,"ion-icon",8),a._uU(43," Ver fotos hist\xf3ricas "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(44,"div",4),a.TgZ(45,"ion-chip",5),a._uU(46,"Informaci\xf3n contribuyente"),a.qZA(),a.qZA(),a.TgZ(47,"ion-card",0),a.TgZ(48,"ion-card-content"),a.TgZ(49,"ion-item",0),a.TgZ(50,"ion-label"),a.TgZ(51,"p"),a._uU(52,"Persona que atiende: "),a.qZA(),a.qZA(),a.TgZ(53,"ion-input",9),a.NdJ("ngModelChange",function(e){return o.personaAtiende=e}),a.qZA(),a.qZA(),a.TgZ(54,"ion-item",0),a.TgZ(55,"ion-label"),a.TgZ(56,"p"),a._uU(57," Seleccione el puesto: "),a.qZA(),a.TgZ(58,"p"),a.TgZ(59,"ion-select",10),a.NdJ("ngModelChange",function(e){return o.idPuesto=e})("ionChange",function(e){return o.resultIdPuesto(e)}),a.TgZ(60,"ion-select-option",11),a._uU(61,"Representante legal"),a.qZA(),a.TgZ(62,"ion-select-option",12),a._uU(63,"Gerente"),a.qZA(),a.TgZ(64,"ion-select-option",13),a._uU(65,"Encargado"),a.qZA(),a.TgZ(66,"ion-select-option",14),a._uU(67,"Empleado"),a.qZA(),a.TgZ(68,"ion-select-option",15),a._uU(69,"Vigilante"),a.qZA(),a.TgZ(70,"ion-select-option",16),a._uU(71,"Otros"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(72,T,5,1,"ion-item",17),a.qZA(),a.qZA(),a.TgZ(73,"ion-card",0),a.TgZ(74,"ion-card-content"),a.TgZ(75,"ion-item",0),a.TgZ(76,"ion-label"),a.TgZ(77,"p"),a._uU(78,"Tipo de servicio actual"),a.qZA(),a.TgZ(79,"ion-text",18),a._uU(80),a.qZA(),a.qZA(),a.qZA(),a.TgZ(81,"ion-item",0),a.TgZ(82,"ion-label"),a.TgZ(83,"p"),a._uU(84," Cambiar el tipo de servicio "),a.qZA(),a.TgZ(85,"p"),a.TgZ(86,"ion-select",10),a.NdJ("ngModelChange",function(e){return o.idTipoServicio=e})("ionChange",function(e){return o.resultTipoServicio(e)}),a.TgZ(87,"ion-select-option",11),a._uU(88,"Dom\xe9stico"),a.qZA(),a.TgZ(89,"ion-select-option",12),a._uU(90,"Comercial"),a.qZA(),a.TgZ(91,"ion-select-option",13),a._uU(92,"Industrial"),a.qZA(),a.TgZ(93,"ion-select-option",14),a._uU(94,"Gobierno"),a.qZA(),a.TgZ(95,"ion-select-option",15),a._uU(96,"Dom\xe9stico / Comercial"),a.qZA(),a.TgZ(97,"ion-select-option",16),a._uU(98,"Residencial"),a.qZA(),a.TgZ(99,"ion-select-option",19),a._uU(100,"Departamental"),a.qZA(),a.TgZ(101,"ion-select-option",20),a._uU(102,"No aplica"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(103,q,6,1,"div",21),a.YNc(104,f,6,1,"div",21),a.qZA(),a.qZA(),a._UZ(105,"hr"),a.TgZ(106,"div",22),a.TgZ(107,"ion-chip",5),a._uU(108,"Caracter\xedsticas del inmueble"),a.qZA(),a.qZA(),a._UZ(109,"hr"),a.TgZ(110,"ion-card",0),a.TgZ(111,"ion-card-content",0),a.TgZ(112,"ion-item",0),a.TgZ(113,"ion-label"),a.TgZ(114,"p"),a._uU(115,"N\xfamero de niveles: "),a.qZA(),a.qZA(),a.TgZ(116,"ion-input",23),a.NdJ("ngModelChange",function(e){return o.numeroNiveles=e}),a.qZA(),a.qZA(),a.TgZ(117,"ion-item",0),a.TgZ(118,"ion-label"),a.TgZ(119,"p"),a._uU(120,"Color fachada: "),a.qZA(),a.qZA(),a.TgZ(121,"ion-input",9),a.NdJ("ngModelChange",function(e){return o.colorFachada=e}),a.qZA(),a.qZA(),a.TgZ(122,"ion-item",0),a.TgZ(123,"ion-label"),a.TgZ(124,"p"),a._uU(125,"Color puerta: "),a.qZA(),a.qZA(),a.TgZ(126,"ion-input",9),a.NdJ("ngModelChange",function(e){return o.colorPuerta=e}),a.qZA(),a.qZA(),a.TgZ(127,"ion-item",0),a.TgZ(128,"ion-label"),a.TgZ(129,"p"),a._uU(130,"Referencia: "),a.qZA(),a.qZA(),a.TgZ(131,"ion-input",9),a.NdJ("ngModelChange",function(e){return o.referencia=e}),a.qZA(),a.qZA(),a.TgZ(132,"ion-item",0),a.TgZ(133,"ion-label"),a.TgZ(134,"p"),a._uU(135," Tipo de predio "),a.qZA(),a.TgZ(136,"p"),a.TgZ(137,"ion-select",24),a.NdJ("ngModelChange",function(e){return o.idTipoPredio=e}),a.TgZ(138,"ion-select-option",11),a._uU(139,"Esquinero"),a.qZA(),a.TgZ(140,"ion-select-option",12),a._uU(141,"Intermedio"),a.qZA(),a.TgZ(142,"ion-select-option",13),a._uU(143,"Manzanero"),a.qZA(),a.TgZ(144,"ion-select-option",14),a._uU(145,"Ahogado"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(146,"ion-item",0),a.TgZ(147,"ion-label"),a.TgZ(148,"p"),a._uU(149,"Entre calle 1: "),a.qZA(),a.qZA(),a.TgZ(150,"ion-input",9),a.NdJ("ngModelChange",function(e){return o.entreCalle1=e}),a.qZA(),a.qZA(),a.TgZ(151,"ion-item",0),a.TgZ(152,"ion-label"),a.TgZ(153,"p"),a._uU(154,"Entre calle 2: "),a.qZA(),a.qZA(),a.TgZ(155,"ion-input",9),a.NdJ("ngModelChange",function(e){return o.entreCalle2=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(156,"hr"),a.TgZ(157,"ion-card",0),a.TgZ(158,"ion-card-content",0),a.TgZ(159,"div",22),a.TgZ(160,"ion-chip",5),a._uU(161,"Irregularidad detectada"),a.qZA(),a.qZA(),a._UZ(162,"hr"),a.TgZ(163,"ion-item",25),a.TgZ(164,"p"),a._uU(165," Ninguna "),a.qZA(),a.qZA(),a.TgZ(166,"ion-item",0),a.TgZ(167,"ion-segment",26),a.NdJ("ionChange",function(e){return o.resultNinguna(e)}),a.TgZ(168,"ion-segment-button",27),a.TgZ(169,"ion-label",28),a._uU(170,"Si"),a.qZA(),a.qZA(),a.TgZ(171,"ion-segment-button",29),a.TgZ(172,"ion-label",30),a._uU(173,"No"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(174,"hr"),a.YNc(175,b,95,0,"div",21),a.qZA(),a.qZA(),a.TgZ(176,"ion-grid"),a.TgZ(177,"ion-row"),a.TgZ(178,"ion-col",31),a.YNc(179,v,2,0,"ion-button",32),a.qZA(),a.qZA(),a.qZA(),a.YNc(180,x,35,7,"ion-card",17),a.TgZ(181,"ion-card",0),a.TgZ(182,"ion-card-content",0),a.TgZ(183,"ion-item",0),a.TgZ(184,"ion-label"),a.TgZ(185,"p"),a._uU(186," Observaci\xf3n del contribuyente: "),a.qZA(),a.qZA(),a.TgZ(187,"ion-textarea",33),a.NdJ("ngModelChange",function(e){return o.observacion=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(188,"ion-slides",34),a.YNc(189,M,3,2,"ion-slide",35),a.qZA(),a.TgZ(190,"ion-item",36),a.TgZ(191,"ion-label"),a.TgZ(192,"p",37),a._uU(193," Fotos de la visita "),a.qZA(),a.TgZ(194,"ion-grid"),a.TgZ(195,"ion-row"),a.TgZ(196,"ion-col",38),a.TgZ(197,"ion-button",39),a.NdJ("click",function(){return o.confirmaFoto(1)}),a._UZ(198,"ion-icon",40),a.qZA(),a.TgZ(199,"ion-label",37),a._uU(200,"Recorrido"),a.qZA(),a.qZA(),a.TgZ(201,"ion-col",38),a.TgZ(202,"ion-button",41),a.NdJ("click",function(){return o.confirmaFoto(2)}),a._UZ(203,"ion-icon",40),a.qZA(),a.TgZ(204,"ion-label",37),a._uU(205,"Evidencia"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(206,"ion-grid"),a.TgZ(207,"ion-row"),a.TgZ(208,"ion-col",38),a.TgZ(209,"ion-button",42),a.NdJ("click",function(){return o.confirmaFoto(3)}),a._UZ(210,"ion-icon",40),a.qZA(),a.TgZ(211,"ion-label",37),a._uU(212,"Toma"),a.qZA(),a.qZA(),a.TgZ(213,"ion-col",38),a.TgZ(214,"ion-button",43),a.NdJ("click",function(){return o.confirmaFoto(4)}),a._UZ(215,"ion-icon",40),a.qZA(),a.TgZ(216,"ion-label",37),a._uU(217,"Observaci\xf3n"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(218,"ion-grid"),a.TgZ(219,"ion-row"),a.TgZ(220,"ion-col",31),a.TgZ(221,"ion-button",44),a.NdJ("click",function(){return o.verify()}),a._uU(222,"Terminar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(223,"ion-segment",45),a.TgZ(224,"ion-segment-button",46),a.NdJ("click",function(){return o.salida(1)}),a._UZ(225,"ion-icon",47),a.TgZ(226,"ion-label",48),a.TgZ(227,"small"),a._uU(228,"Inicio"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(229,"ion-segment-button",46),a.NdJ("click",function(){return o.salida(2)}),a._UZ(230,"ion-icon",49),a.TgZ(231,"ion-label",48),a.TgZ(232,"small"),a._uU(233,"Cuentas"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(234,"ion-segment-button",46),a.NdJ("click",function(){return o.salida(3)}),a._UZ(235,"ion-icon",50),a.TgZ(236,"ion-label",48),a.TgZ(237,"small"),a._uU(238,"Mapa"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(239,"ion-segment-button",46),a.NdJ("click",function(){return o.salida(4)}),a._UZ(240,"ion-icon",51),a.TgZ(241,"ion-label",48),a.TgZ(242,"small"),a._uU(243,"S.P\xfablicos"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(244,"ion-segment-button",46),a.NdJ("click",function(){return o.salida(5)}),a._UZ(245,"img",52),a.TgZ(246,"ion-label",53),a.TgZ(247,"small"),a._uU(248,"S.O.S."),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(7),a.Q6J("name",o.iconoProceso),a.xp6(4),a.Oqu(o.nombreProceso),a.xp6(11),a.hij(" ",o.nombrePlaza," "),a.xp6(6),a.hij(" ",o.nombreTareaAsignada," "),a.xp6(6),a.hij(" ",o.account," "),a.xp6(6),a.hij(" ",o.propietario," "),a.xp6(13),a.Q6J("ngModel",o.personaAtiende),a.xp6(6),a.Q6J("ngModel",o.idPuesto),a.xp6(13),a.Q6J("ngIf",o.mostrarOtroPuesto),a.xp6(8),a.hij(" ",o.tipoServicioPadron," "),a.xp6(6),a.Q6J("ngModel",o.idTipoServicio),a.xp6(17),a.Q6J("ngIf",o.mostrarGiro),a.xp6(1),a.Q6J("ngIf",o.plazaAgua),a.xp6(12),a.Q6J("ngModel",o.numeroNiveles),a.xp6(5),a.Q6J("ngModel",o.colorFachada),a.xp6(5),a.Q6J("ngModel",o.colorPuerta),a.xp6(5),a.Q6J("ngModel",o.referencia),a.xp6(6),a.Q6J("ngModel",o.idTipoPredio),a.xp6(13),a.Q6J("ngModel",o.entreCalle1),a.xp6(5),a.Q6J("ngModel",o.entreCalle2),a.xp6(20),a.Q6J("ngIf",o.mostrarIrregularidades),a.xp6(4),a.Q6J("ngIf",!o.mostrarInspectores),a.xp6(1),a.Q6J("ngIf",o.mostrarInspectores),a.xp6(7),a.Q6J("ngModel",o.observacion),a.xp6(1),a.Q6J("options",o.sliderOpts),a.xp6(1),a.Q6J("ngForOf",o.imgs))},directives:[c.W2,c.gu,c.Q$,c.PM,c.hM,c.FN,c.Ie,c.YG,c.pK,c.j9,m.JJ,m.On,c.t9,c.QI,c.n0,p.O5,c.yW,c.as,c.cJ,c.GO,c.jY,c.Nd,c.wI,c.g2,c.Hr,p.sg,c.Zi,c.tO,c.A$,c.W4],styles:[".contenedor-icono-proceso[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,#3880ff,#2e68db,#2352b9,#143c98,#002878);border:2px solid lime;width:70px;height:70px;border-radius:50%;display:flex;justify-content:center;align-items:center;margin:20px auto;padding:10px}.icono-proceso[_ngcontent-%COMP%]{text-align:center;color:#00c800;font-size:40px}.contenedor-nombre-proceso[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.contenedor-nombre-proceso[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:22px;font-weight:700}.button-fotos-historicas[_ngcontent-%COMP%]{margin:10px 0}ion-card[_ngcontent-%COMP%]{padding:15px 0;border-top:.7px dotted #00c800;border-bottom:.7px dotted #00c800}p[_ngcontent-%COMP%]{font-weight:300;font-size:11px;color:#000}.myCustomSelect[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%]{max-width:100%!important}.imagen[_ngcontent-%COMP%]{width:35%;height:35%;margin-top:30px;margin-bottom:30px}p[_ngcontent-%COMP%]{color:#fff!important}.fotos-visita[_ngcontent-%COMP%]{text-align:center;color:#fff}.plaza[_ngcontent-%COMP%], .procedimiento[_ngcontent-%COMP%]{width:100px!important}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{color:#fff!important}.segment-no[_ngcontent-%COMP%], .segment-si[_ngcontent-%COMP%]{padding:0;border-radius:10px!important;height:10px!important}.segment-no[_ngcontent-%COMP%]{margin-left:10px}.marca-si[_ngcontent-%COMP%]{color:#9acd32}.icon-trash[_ngcontent-%COMP%], .marca-no[_ngcontent-%COMP%]{color:red}ion-segment[_ngcontent-%COMP%]{--background:#254061;border-top:1px solid #0000001a;height:60px;margin-bottom:-5px}ion-segment-button[_ngcontent-%COMP%]{--indicator-color:#0000!important}"]}),e})()}}]);